"use strict";$(function(){function e(t,a,o){clearTimeout(d);var n=t*o.width()/a;o.find("#bar").animate({width:n},500).html(t+"s"),t>0&&(d=setTimeout(function(){e(t-1,a,o)},1e3)),0===t&&(console.log(r),$(".gameRunning").hide(),r.pause(),$(".gameover").fadeIn(),i())}function t(){m.html(""),l.html("Nice. <br>On to the next one.")}function i(){m.html(""),l.html("")}function a(){var t=c.title.shuffle();m.empty();for(var i=0;i<t.length;i++)m.append("<li data-index="+i+">"+t[i]+"</li>");e(10,10,$("#progressBar")),$("#movie_picture").css("background-image","url(public/assets/"+c.image+")"),r.src="public/assets/"+c.audio+".mp3",r.loop=!0,r.play(),u.text(c.hint)}function o(){$(".welcome").fadeOut(),a()}function n(){$(".gameover").hide(),$(".gameRunning").show(),a()}console.log("Guess Movie Game");var r=$("audio")[0],l=$("#result_list"),m=$("#letters_list"),u=$("#dropdownHint"),s=[{title:"SCREAM",image:"scream.bmp",audio:"scream",hint:"What's your favourite Scary Movie?"},{title:"IRONMAN",image:"ironman.bmp",audio:"ironman",hint:"Heroes aren't born. They're built."},{title:"PREDATOR",image:"predator.bmp",audio:"predator",hint:"Soon the hunt will begin."},{title:"ROBOCOP",image:"robocop.bmp",audio:"robocop",hint:"Part man. Part machine. All cop."},{title:"BATMAN_VS_SUPERMAN",image:"batmanvssuperman.bmp",audio:"batmanvssuperman",hint:"Dawn of Justice"},{title:"GLADIATOR",image:"gladiator.bmp",audio:"gladiator",hint:"Father of a murdered son, husband to a murdered wife and I shall have my vengeance in this life or the next."},{title:"FRIDAY_THE_13TH",image:"fridaythe13th.bmp",audio:"fridaythe13th",hint:"Fridays will never be the same again."},{title:"V_FOR_VENDETTA",image:"vforvendetta.bmp",audio:"vforvendetta",hint:"Remember, remember the 5th of November."},{title:"PHANTOM_OF_THE_OPERA",image:"phantomoftheopera.bmp",audio:"phantomoftheopera"}],h=0,c=s[h],d=null;console.log("Movie:",c),String.prototype.shuffle=function(){for(var e=this.split(""),t=e.length,i=t-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),o=e[i];e[i]=e[a],e[a]=o}return e.join("")},$("#welcomeBtn").on("click",o),$("#restartBtn").on("click",n),m.on("click","li",function(e){$(e.target).hide();var o=$(e.target).text(),n=$(e.target).data("index");console.log(o),l.append("<li data-index="+n+">"+o+"</li>"),l.text()===c.title&&(clearTimeout(d),r.src="public/assets/correct.mp3",r.loop=!1,r.play(),t(),h<s.length-1&&(h++,c=s[h],i(),setTimeout(a,1800)))}),l.on("click","li",function(e){var t=$(e.target).data("index");m.children().filter(function(e){return e===t}).show(),$(e.target).remove(),console.log($(e.target))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidGltZXJJZCIsInRpbWVsZWZ0IiwidGltZXRvdGFsIiwiJGVsZW1lbnQiLCJjbGVhclRpbWVvdXQiLCJwcm9ncmVzc0JhcldpZHRoIiwiYW5pbWF0ZSIsIndpZHRoIiwiaHRtbCIsImZpbmQiLCJjb25zb2xlIiwibG9nIiwiYXVkaW8iLCJoaWRlIiwiZmFkZUluIiwiJGxldHRlcnMiLCIkcmVzdWx0IiwiY29uZ3JhdHMiLCJjbGVhckxldHRlcnMiLCJzaHVmZmxlZFdvcmQiLCJjdXJyZW50VGl0bGUiLCJ0aXRsZSIsInNodWZmbGUiLCJlbXB0eSIsImFwcGVuZCIsImxlbmd0aCIsImkiLCJwcm9ncmVzcyIsImNzcyIsImltYWdlIiwibG9vcCIsInBsYXkiLCIkaGludCIsInRleHQiLCJoaW50IiwiaGlkZVdlbGNvbWUiLCJkaXNwbGF5V29yZCIsInJlc3RhcnRHYW1lIiwibW92aWVUaXRsZXMiLCJjdXJyZW50SW5kZXgiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJhIiwidGhpcyIsInNwbGl0IiwibiIsImoiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0bXAiLCJqb2luIiwib24iLCJ0YXJnZXQiLCJlIiwibGV0dGVyIiwiaW5kZXgiLCJkYXRhIiwic2V0VGltZW91dCIsImRhdGFJbmRleCIsImNoaWxkcmVuIiwiZmlsdGVyIiwic2hvdyIsInJlbW92ZSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0F5REEsUUFBSUMsR0FBSkMsRUFBQUMsRUFBQUMsR0FHRUMsYUFBYUosRUFEZixJQUFBSyxHQUFrQkosRUFBVUMsRUFBV0MsUUFBVUQsQ0FDL0NFLEdBQUFBLEtBQWFKLFFBQWJNLFNBQUFDLE1BQUFGLEdBQUEsS0FBQUcsS0FBQVAsRUFBQSxLQUNBQSxFQUFJSSxJQUNKRixFQUFTTSxXQUFhSCxXQUNuQkwsRUFBQUEsRUFBYyxFQUFBQyxFQUFBQyxJQUNmSCxNQUFBLElBQVVDLElBR1hTLFFBQUFDLElBQUFDLEdB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QUFBQSxJQUtFRyxFQUFla0IsRUFBWUMsT0FBQUEsSUFDM0JyQixJQUNBd0MsRUFBV3RCLEVBQWFHLEdBSjFCckIsSUFNRXdDLFdBQUF0QixFQUFBLFVBYU5wQixFQUFRb0MsR0FBRyxRQUFTLEtBQU0sU0FBQ0UsR0FPekIsR0FBQUssR0FBQTVELEVBQUF1RCxFQUFBRCxRQUFBSSxLQUFBLFFBQ0ExQyxHQUFBNkMsV0FBQUMsT0FBQSxTQUFBTCxHQUNBOUMsTUFBUUMsS0FBUTBDLElBVGxCUyxPQS9LRi9ELEVBQUF1RCxFQUFBRCxRQUFBVSxTQXdMSXJELFFBQVFDLElBQUlaLEVBQUV1RCxFQUFFRCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ0d1ZXNzIE1vdmllIEdhbWUnKTtcblxuICBjb25zdCBhdWRpbyA9ICQoJ2F1ZGlvJylbMF07XG4gIGNvbnN0ICRyZXN1bHQgPSAkKCcjcmVzdWx0X2xpc3QnKTtcbiAgY29uc3QgJGxldHRlcnMgPSAkKCcjbGV0dGVyc19saXN0Jyk7XG4gIGNvbnN0ICRoaW50ID0gJCgnI2Ryb3Bkb3duSGludCcpO1xuICBjb25zdCBtb3ZpZVRpdGxlcyA9IFt7XG4gICAgdGl0bGU6ICdTQ1JFQU0nLFxuICAgIGltYWdlOiAnc2NyZWFtLmJtcCcsXG4gICAgYXVkaW86ICdzY3JlYW0nLFxuICAgIGhpbnQ6ICdXaGF0XFwncyB5b3VyIGZhdm91cml0ZSBTY2FyeSBNb3ZpZT8nXG5cbiAgfSwge1xuICAgIHRpdGxlOiAnSVJPTk1BTicsXG4gICAgaW1hZ2U6ICdpcm9ubWFuLmJtcCcsXG4gICAgYXVkaW86ICdpcm9ubWFuJyxcbiAgICBoaW50OiAnSGVyb2VzIGFyZW5cXCd0IGJvcm4uIFRoZXlcXCdyZSBidWlsdC4nXG5cbiAgfSwge1xuICAgIHRpdGxlOiAnUFJFREFUT1InLFxuICAgIGltYWdlOiAncHJlZGF0b3IuYm1wJyxcbiAgICBhdWRpbzogJ3ByZWRhdG9yJyxcbiAgICBoaW50OiAnU29vbiB0aGUgaHVudCB3aWxsIGJlZ2luLidcbiAgfSwge1xuICAgIHRpdGxlOiAnUk9CT0NPUCcsXG4gICAgaW1hZ2U6ICdyb2JvY29wLmJtcCcsXG4gICAgYXVkaW86ICdyb2JvY29wJyxcbiAgICBoaW50OiAnUGFydCBtYW4uIFBhcnQgbWFjaGluZS4gQWxsIGNvcC4nXG4gIH0sIHtcbiAgICB0aXRsZTogJ0JBVE1BTl9WU19TVVBFUk1BTicsXG4gICAgaW1hZ2U6ICdiYXRtYW52c3N1cGVybWFuLmJtcCcsXG4gICAgYXVkaW86ICdiYXRtYW52c3N1cGVybWFuJyxcbiAgICBoaW50OiAnRGF3biBvZiBKdXN0aWNlJ1xuICB9LCB7XG4gICAgdGl0bGU6ICdHTEFESUFUT1InLFxuICAgIGltYWdlOiAnZ2xhZGlhdG9yLmJtcCcsXG4gICAgYXVkaW86ICdnbGFkaWF0b3InLFxuICAgIGhpbnQ6ICdGYXRoZXIgb2YgYSBtdXJkZXJlZCBzb24sIGh1c2JhbmQgdG8gYSBtdXJkZXJlZCB3aWZlIGFuZCBJIHNoYWxsIGhhdmUgbXkgdmVuZ2VhbmNlIGluIHRoaXMgbGlmZSBvciB0aGUgbmV4dC4nXG4gIH0sIHtcbiAgICB0aXRsZTogJ0ZSSURBWV9USEVfMTNUSCcsXG4gICAgaW1hZ2U6ICdmcmlkYXl0aGUxM3RoLmJtcCcsXG4gICAgYXVkaW86ICdmcmlkYXl0aGUxM3RoJyxcbiAgICBoaW50OiAnRnJpZGF5cyB3aWxsIG5ldmVyIGJlIHRoZSBzYW1lIGFnYWluLidcbiAgfSwge1xuICAgIHRpdGxlOiAnVl9GT1JfVkVOREVUVEEnLFxuICAgIGltYWdlOiAndmZvcnZlbmRldHRhLmJtcCcsXG4gICAgYXVkaW86ICd2Zm9ydmVuZGV0dGEnLFxuICAgIGhpbnQ6ICdSZW1lbWJlciwgcmVtZW1iZXIgdGhlIDV0aCBvZiBOb3ZlbWJlci4nXG4gIH0sIHtcbiAgICB0aXRsZTogJ1BIQU5UT01fT0ZfVEhFX09QRVJBJyxcbiAgICBpbWFnZTogJ3BoYW50b21vZnRoZW9wZXJhLmJtcCcsXG4gICAgYXVkaW86ICdwaGFudG9tb2Z0aGVvcGVyYSdcbiAgfV07XG5cbiAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG4gIGxldCBjdXJyZW50VGl0bGUgPSBtb3ZpZVRpdGxlc1tjdXJyZW50SW5kZXhdO1xuICBsZXQgdGltZXJJZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gcHJvZ3Jlc3ModGltZWxlZnQsIHRpbWV0b3RhbCwgJGVsZW1lbnQpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgdmFyIHByb2dyZXNzQmFyV2lkdGggPSB0aW1lbGVmdCAqICRlbGVtZW50LndpZHRoKCkgLyB0aW1ldG90YWw7XG4gICAgJGVsZW1lbnQuZmluZCgnI2JhcicpLmFuaW1hdGUoeyB3aWR0aDogcHJvZ3Jlc3NCYXJXaWR0aCB9LCA1MDApLmh0bWwodGltZWxlZnQgKyAncycpO1xuICAgIGlmKHRpbWVsZWZ0ID4gMCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHByb2dyZXNzKHRpbWVsZWZ0IC0gMSwgdGltZXRvdGFsLCAkZWxlbWVudCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gICAgaWYodGltZWxlZnQgPT09IDApe1xuICAgICAgY29uc29sZS5sb2coYXVkaW8pO1xuICAgICAgJCgnLmdhbWVSdW5uaW5nJykuaGlkZSgpO1xuICAgICAgYXVkaW8ucGF1c2UoKTtcbiAgICAgICQoJy5nYW1lb3ZlcicpLmZhZGVJbigpO1xuICAgICAgY2xlYXJMZXR0ZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ01vdmllOicsIGN1cnJlbnRUaXRsZSk7XG5cbiAgZnVuY3Rpb24gY29uZ3JhdHMoKSB7XG4gICAgJGxldHRlcnMuaHRtbCgnJyk7XG4gICAgJHJlc3VsdC5odG1sKCdOaWNlLiA8YnI+T24gdG8gdGhlIG5leHQgb25lLicpO1xuXG4gIH1cbiAgZnVuY3Rpb24gY2xlYXJMZXR0ZXJzKCkge1xuICAgICRsZXR0ZXJzLmh0bWwoJycpO1xuICAgICRyZXN1bHQuaHRtbCgnJyk7XG4gIH1cblxuXG4gIC8vIHNodWZmbGUgZnVuY3Rpb25cbiAgU3RyaW5nLnByb3RvdHlwZS5zaHVmZmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhID0gdGhpcy5zcGxpdCgnJyksXG4gICAgICBuID0gYS5sZW5ndGg7XG5cbiAgICBmb3IodmFyIGkgPSBuIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgIHZhciB0bXAgPSBhW2ldO1xuICAgICAgYVtpXSA9IGFbal07XG4gICAgICBhW2pdID0gdG1wO1xuICAgIH1cbiAgICByZXR1cm4gYS5qb2luKCcnKTtcbiAgfTtcblxuXG4gIC8vIHNodWZmbGVkIHdvcmQgYW5kIHBsYWNlIGluIGxldHRlcnNcbiAgZnVuY3Rpb24gZGlzcGxheVdvcmQoKXtcbiAgICBjb25zdCBzaHVmZmxlZFdvcmQgPSBjdXJyZW50VGl0bGUudGl0bGUuc2h1ZmZsZSgpO1xuICAgICRsZXR0ZXJzLmVtcHR5KCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3NodWZmbGVkIHdvcmQnLCBzaHVmZmxlZFdvcmQpO1xuICAgIGZvciAobGV0IGk9MDsgaSA8IHNodWZmbGVkV29yZC5sZW5ndGg7IGkrKyApIHtcbiAgICAgICRsZXR0ZXJzLmFwcGVuZChgPGxpIGRhdGEtaW5kZXg9JHtpfT4ke3NodWZmbGVkV29yZFtpXX08L2xpPmApO1xuICAgIH1cbiAgICBwcm9ncmVzcygxMCwgMTAsICQoJyNwcm9ncmVzc0JhcicpKTtcblxuICAgIC8vIGltYWdlIGNoYW5nZSB3aGVuIG1vdmllIHRpdGxlIGNoYW5nZXNcbiAgICAkKCcjbW92aWVfcGljdHVyZScpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwocHVibGljL2Fzc2V0cy8ke2N1cnJlbnRUaXRsZS5pbWFnZX0pYCk7XG4gICAgLy8gYXVkaW8gY2hhbmdlIHdoZW4gbW92aWUgdGl0bGUgY2hhbmdlc1xuICAgIGF1ZGlvLnNyYyA9IGBwdWJsaWMvYXNzZXRzLyR7Y3VycmVudFRpdGxlLmF1ZGlvfS5tcDNgO1xuICAgIGF1ZGlvLmxvb3AgPSB0cnVlO1xuICAgIGF1ZGlvLnBsYXkoKTtcbiAgICAvLyAvLyBoaW50IGNoYW5nZXMgd2hlbiBtb3ZpZSB0aXRsZSBjaGFuZ2VzXG4gICAgLy8gJCgnI2Ryb3Bkb3duSGludCcpLmh0bWw7XG4gICAgJGhpbnQudGV4dChjdXJyZW50VGl0bGUuaGludCk7XG4gIH1cblxuLy8gc3RhcnQgb24gd2VsY29tZSBzY3JlZW4uIGNsaWNrIGJ1dHRvbiB0byBoaWRlIHdlbGNvbWUgcGFnZSBhbmQgcnVuIGdhbWVcbiAgZnVuY3Rpb24gaGlkZVdlbGNvbWUoKSB7XG4gICAgJCgnLndlbGNvbWUnKS5mYWRlT3V0KCk7XG4gICAgZGlzcGxheVdvcmQoKTtcbiAgfVxuICAkKCcjd2VsY29tZUJ0bicpLm9uKCdjbGljaycsIGhpZGVXZWxjb21lKTtcblxuICAvL3Jlc3RhcnQgZ2FtZVxuICBmdW5jdGlvbiByZXN0YXJ0R2FtZSgpe1xuICAgICQoJy5nYW1lb3ZlcicpLmhpZGUoKTtcbiAgICAkKCcuZ2FtZVJ1bm5pbmcnKS5zaG93KCk7XG4gICAgZGlzcGxheVdvcmQoKTtcbiAgfVxuICAkKCcjcmVzdGFydEJ0bicpLm9uKCdjbGljaycsIHJlc3RhcnRHYW1lKTtcblxuICAvLyBoaWRpbmcgbGV0dGVycyB3aGVuIGNsaWNrZWQgaW4gdGhlIGxldHRlcnNfbGlzdCBhbmQgc2hvdyBpbiByZXN1bHRfbGlzdFxuICAkbGV0dGVycy5vbignY2xpY2snLCdsaScsIChlKSA9PiB7XG4gICAgJChlLnRhcmdldCkuaGlkZSgpO1xuICAgIGNvbnN0IGxldHRlciA9ICQoZS50YXJnZXQpLnRleHQoKTtcbiAgICBjb25zdCBpbmRleCA9ICQoZS50YXJnZXQpLmRhdGEoJ2luZGV4Jyk7XG4gICAgY29uc29sZS5sb2cobGV0dGVyKTtcbiAgICAkcmVzdWx0LmFwcGVuZChgPGxpIGRhdGEtaW5kZXg9JHtpbmRleH0+JHtsZXR0ZXJ9PC9saT5gKTtcbiAgICBpZiAoJHJlc3VsdC50ZXh0KCkgPT09IGN1cnJlbnRUaXRsZS50aXRsZSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgICAgYXVkaW8uc3JjID0gYHB1YmxpYy9hc3NldHMvY29ycmVjdC5tcDNgO1xuICAgICAgYXVkaW8ubG9vcCA9IGZhbHNlO1xuICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgY29uZ3JhdHMoKTtcblxuXG4gICAgICBpZiAoY3VycmVudEluZGV4IDwgbW92aWVUaXRsZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBjdXJyZW50SW5kZXgrKztcbiAgICAgICAgY3VycmVudFRpdGxlID0gbW92aWVUaXRsZXNbY3VycmVudEluZGV4XTtcbiAgICAgICAgY2xlYXJMZXR0ZXJzKCk7XG4gICAgICAgIHNldFRpbWVvdXQoZGlzcGxheVdvcmQsIDE4MDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZ2FtZSBvdmVyIGxvZ2ljXG4gICAgICB9XG5cblxuICAgICAgLy8gY29uc29sZS5sb2coY2xlYXJMZXR0ZXJzKCkpO1xuICAgICAgLy8gcmV0dXJuIGN1cnJlbnRUaXRsZS5kaXNwbGF5V29yZFxuXG4gICAgfVxuXG5cbiAgfSk7XG5cbiAgLy8gaGlkaW5nIGxldHRlcnMgd2hlbiBjbGlja2VkIGluIHJlc3VsdF9saXN0IGFuZCBzaG93IGluIGxldHRlcnNfbGlzdFxuICAkcmVzdWx0Lm9uKCdjbGljaycsICdsaScsIChlKSA9PiB7XG4gICAgY29uc3QgZGF0YUluZGV4ID0gJChlLnRhcmdldCkuZGF0YSgnaW5kZXgnKTtcbiAgICAkbGV0dGVycy5jaGlsZHJlbigpLmZpbHRlcigoaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiBpbmRleCA9PT0gZGF0YUluZGV4O1xuICAgIH0pLnNob3coKTtcbiAgICAkKGUudGFyZ2V0KS5yZW1vdmUoKTtcblxuICAgIC8vIHVzZSB0aGUgZGF0YSBpbmRleCB0byBkaXNwbGF5IHRoZSBwYXJ0aWN1bGFyIExJXG4gICAgLy8gZGlzcGxheSBub25lIHRoZSBMSSB3ZSBqdXN0IGNsaWNrZWQgdG8gbW92ZSBiYWNrIGRvd25cbiAgICBjb25zb2xlLmxvZygkKGUudGFyZ2V0KSk7XG4gIH0pO1xufSk7XG5cblxuXG4vL0FjdGlvbiAgUGxhbjpcbi8vIENyZWF0ZSBiYXNpYyBsYXlvdXQgY29udGFpbmluZyAxMiBkaXZzLiAxIG1haW4gY29udGFpbmVyLiAxIGhlYWRlciBjb250YWluaW5nIDMgaGVhZGVycyBmb3IgbG9nbywgdGltZXIgYW5kIHNjb3JlLiAxICd0b3AnIGRpdiBjb250YWluaW5nIDMgZGl2cyBmb3IgbW92aWUgcGljdHVyZSwgbW92aWUgdGl0bGUgcmVzdWx0LCBnYW1lIG9wdGlvbnMuIDEgJ2JvdHRvbScgZGl2IGNvbnRhaW5pbmcgYSBsZXR0ZXJzIGRpdiB3aXRoIGFuIHVub3JkZXJlZCBsZXR0ZXJzIGxpc3Qgd2l0aGluLlxuXG4vLyBXb3JrIG9uIHRoZSBzaHVmZmxlIGZ1bmN0aW9uIGFuZCBmaWd1cmUgb3V0IGhvdyB0byBtYWtlIGVhY2ggc2h1ZmZsZWQgbGV0dGVyIGNsaWNrYWJsZSBhcyB3ZWxsIGFzIG1ha2UgaXQgZGlzc2FwZWFyIGFuZCBzaG93IGluIHRoZSAnbW92aWUgdGl0bGUnIGRpdi4gVGhlIGxldHRlcnMgd2lsbCBiZSBwbGFjZWQgaW4gb3JkZXIgb2YgY2xpY2tzIGFuZCBhbnN3ZXIgaXMgb25seSBjb3JyZWN0IHdoZW4gbGV0dGVycyBhcmUgaW4gdGhlIHJpZ2h0IG9yZGVyLiBVc2UgdGhlIHNwbGl0ZWQgYXJyYXkgd2l0aCBhIGZvckVhY2ggc3RhdGVtZW50IHdoZW4gY3JlYXRpbmcgdGhlIGJveGVzLlxuXG4vLyBjaGFuZ2UgbW92aWUgdGl0bGUgLSBkb25lXG4vLyBjbGVhciBleGlzdGluZyBsZXR0ZXJzX2xpc3QgLSBkb25lXG4vLyBzaHVmZmxlIHRoZSB3b3JkIC0gZG9uZVxuLy8gZGlzcGxheSBzaHVmZmxlZCBsZXR0ZXJzIC0gZG9uZVxuLy8gZGlzcGxheSBjb3JyZWN0IGltYWdlIGFuZCBjaGFuZ2UgZm9yIHRpdGxlIC0gZG9uZVxuLy8gcGxheSBjb3JyZWN0IGF1ZGlvIGFuZCBjaGFuZ2UgZm9yIHRpdGxlIC0gZG9uZVxuLy8gZ2l2ZSBoaW50IHZhbHVlIGluIGVhY2ggb2JqZWN0IGFuZCBjaGFuZ2UgZWFjaCB0aXRsZSAtXG5cbi8vVGlwczpcbi8vTWlrZTogU3BsaXQgZmlsbSwgY3JlYXRlIGEgZm9yIGxvb3AgYW5kIGFwcGVuZCB0byBET00uXG5cbi8vU3RhY2tvdmVyZmxvdzogWW91IGRvbid0IG5lZWQgdG8gaGlkZSB0aGUgbGV0dGVycywgdXNlIGRhdGEtYXR0cmlidXRlcyB0byBpZGVudGlmeSB0aGUgcmlnaHQgcG9zaXRpb24gb2YgdGhlbSBpbiB0aGUgTW92aWUgVGl0bGUgY29udGFpbmVyIGFuZCBhcHBlbmQgdGhhdCBpbiB0aGUgZW1wdHkgYm94ZXMuIFRoZSBsZXR0ZXJzIHRoYXQgZG9lc24ndCBjb3JyZXNwb25kIHRvIHRoZSBtb3ZpZSB0aXRsZSBqdXN0IHB1dCB3aXRoIGRhdGEtYXR0cmlidXRlcyBlbXB0eSBhbmQgeW91ciBhbGdvcml0aG0gd2lsbCBmaWx0ZXIgdGhhdCBwdXR0aW5nIGEgcmVkIGJvcmRlciBpbnRvIHNlbGVjdGVkIHdyb25nIGxldHRlciBhbmQgc3R1ZmY7XG4iXX0=
